---
molecule:
  raw_ssh_args:
    - -o StrictHostKeyChecking=false
    - -o UserKnownHostsFile=~/.ssh/known_hosts
ansible:
  config_file: ./ansible.cfg
dependency:
  name: galaxy
  requirements_file: requirements.yml
driver:
  name: vagrant # vagrant|docker
docker:
  containers:
    - name: dns-resolver-ubuntu
      image: ubuntu
      image_version: latest
      ansible_groups:
        - group1
    - name: dns-resolver-centos
      image: centos
      image_version: latest
      ansible_groups:
        - group1
vagrant:
  # raw_config_args:
  #   - "ssh.insert_key = false"
  #   # - "ssh.shell = \"sh\"" # freebsd
  #   # - "vm.base_mac = \"080027D14C66\"" # freebsd
  #   - "vm.provision \"file\", source: \"~/.ssh/id_rsa.pub\", destination: \"~/.ssh/authorized_keys\""
  platforms:
    # - name: freeBSD
    #   box: freebsd/FreeBSD-11.1-RELEASE
    # - name: ubuntu17.10
    #   box: ubuntu/artful64 # unbound overwrites system dns settings (stops on dns lookups during ansible playbook)
    - name: centos7
      box: centos/7
  providers:
    - name: virtualbox
      type: virtualbox
      options:
        memory: 512
        cpus: 2
  instances:
    - name: dns-resolver
      ansible_groups:
        - group1
verifier:
  name: testinfra
